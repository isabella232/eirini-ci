groups:
- name: main
  jobs:
  - verify-helm-deployment
  - run-tests
  - run-integration-tests
  - create-go-docker-images
  - create-secret-smuggler-docker-image
  - run-fluentd-unit-tests
  - create-fluentd-docker-image
  - staging-test
  - create-staging-docker-images
  - update-eirini-version-files
  - update-fluentd-version-files
  - update-secret-smuggler-version-files
  - update-staging-version-files
  - fast-forward-release
  - deploy-eirini-yamls-((gcp-cluster-name))
  - run-eats-tests-((world-name))
  - run-eats-tests-((gcp-cluster-name))

- name: eirini
  jobs:
  - run-tests
  - run-integration-tests
  - create-go-docker-images
  - create-secret-smuggler-docker-image
  - run-fluentd-unit-tests
  - create-fluentd-docker-image
  - staging-test
  - create-staging-docker-images
  - update-eirini-version-files
  - update-fluentd-version-files
  - update-secret-smuggler-version-files
  - update-staging-version-files

- name: eirini-release
  jobs:
  - deploy-eirini-yamls-((gcp-cluster-name))
  - run-eats-tests-((gcp-cluster-name))
  - verify-helm-deployment
  - run-eats-tests-((world-name))
  - fast-forward-release

- name: bumps
  jobs:
  - bump-go-modules-eirini
  - bump-go-modules-eirinifs

- name: cluster-((world-name))
  jobs:
  - delete-cluster-((world-name))
  - create-cluster-((world-name))
  - prepare-cluster-((world-name))

- name: gke-clusters
  jobs:
  - delete-cluster-monaco
  - create-cluster-monaco
  - delete-cluster-integration
  - create-cluster-integration

- name: test-and-build-((gcp-cluster-name))
  jobs:
  - deploy-eirini-yamls-((gcp-cluster-name))
  - run-eats-tests-((gcp-cluster-name))

- name: test-and-build
  jobs:
  - run-tests
  - run-integration-tests
  - create-go-docker-images
  - create-secret-smuggler-docker-image
  - run-fluentd-unit-tests
  - create-fluentd-docker-image
  - staging-test
  - create-staging-docker-images
  - verify-helm-deployment
  - run-eats-tests-((world-name))

- name: update-version-files
  jobs:
  - update-eirini-version-files
  - update-fluentd-version-files
  - update-secret-smuggler-version-files
  - update-staging-version-files
